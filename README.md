# Требования и рекомендации по оформлению MATLAB-кода

## Введение

Техническая документация включает все необходимые материалы, чтобы разработчики и пользователи могли легко понять и использовать предоставленный код. Она включает описание функций, модулей и классов, что помогает ориентироваться в проекте, поддерживать и развивать его.

При разработке подхода к документированию были поставлены следующие цели:

1. Удобочитаемость документации из редактора MATLAB.
2. Удобочитаемость документации при выводе её при помощи `help`.
3. Простота программного анализа документации в m-файлах.

В представленном подходе к документированию кода в MATLAB используется 8 документирующих блоков для функций и классов и 7 для скриптов.

При этом здесь и далее:

1. Под функциями понимаются как файл-функции, так и методы, вложенные функции и подфункции, если не указано иное.
2. Под переменными понимаются входные и выходные параметры функций, а также свойства классов.
3. Примеры в разделе "[[#Требования и рекомендации]]" несут цель продемонстрировать конкретно представленные требование или блок требований. В связи с чем примеры могут быть упрощены и противоречить другим требованиям и рекомендациям.
4. Так как одна из целей - простота программного анализа, то формат каждого блока строго определён. Все пункты, перечисленные в каком-либо разделе являются обязательными для исполнения, если в самом пункте не указано иное. Требования и рекомендацию выдвигаются непосредственно к наличию тех или иных блоков.
5. В некоторых примерах в качестве заглушек используется описание подменяемого блока взятое в уголки "<>".

## Случаи документирования

Решение, нужно ли документировать какую-то часть кода или нет, следует принимать, исходя из следующих приоритетов. При этом исключения из разделов "Обязательно", "Рекомендуется" и "По желанию" указаны отдельно в "Не применяется".

### Обязательно

Документирование обязательно должно проводиться для:

1. Классов;
2. Методов;
3. Главных функций в файл-функции (функция, которая первая в файле).

### Рекомендуется

Документирование рекомендуется проводить для:

1. Подфункций (sub-function - функция в одном файле с файл-функцией или классом, но не являющаяся nested-функцией, главной функцией файл-функции или методом класса).
2. Скриптов.

### По желанию

Документирование можно проводить по желанию для:

1. Вложенных функций (nested-function - функция, объявленная внутри другой функции, но не являющаяся анонимной).

### Не применяется

Для тестовых классов представленный здесь подход следует использовать только при документировании методов, не имеющих атрибутов "TestClassSetup", "TestClassTeardown", "Test", "TestMethodSetup", "TestMethodTeardown". Для всех прочих частей тестового класса принципы документирования в разработке.

## Требования и рекомендации

### Общее оформление (Т)

1.Для скриптов документирующий комментарий следует указывать с первой строки файла без отступа.

*Пример:*

```matlab
% Пример документирующего комментария для скрипта
%

a = 12;
disp(a);
```

2.Для функций и классов документирующий комментарий следует начинать на следующей строке после объявления и поддерживать тот же уровень вложенности, что у объявляющего слова документируемой сущности.

*Пример:*

```matlab
classdef ExampleClass < handle 
% ExampleClass - пример класса. 
%
% Объявление класса началось и закончилось на 1-ой строке, 
% поэтому документирующий комментарий начался со второй строки, где знак 
% "%" имеет такой же отступ от начала строки, как и "classdef" - ноль.
%

    methods
        function [veryLongOutputName] = exampleFunc(input1, input2, ...
                                                    veryLongInputName3)
        % exampleFunc - пример функции. 
        %
        % Объявление функции началось на 8-ой строке и 
        % закончилось на 9-ой, поэтому документирующий комментарий начался
        % с 11-ой строки. При этом знак "%" имеет такой же отсутп от начала 
        % строки, как и "function" - 2 tab (8 пробелов).
        %

            ...
        end
    end
end
```

>*Почему так?*
>
> 1. Документирование должно производиться после объявляющего слова, так как тогда MATLAB способен обнаружить соответствующую информацию для вывода в `help` и формирования документации.
> 2. Уровень вложенности документирующего комментария должен поддерживаться таким же, как и у объявляющего слова, так как таким образом, во-первых, умещается больше символов в строке. Во-вторых, согласно пункту 3.4.5. стилистических требований к MATLAB-коду. В-третьих, если на следующей строке после документирующего комментария начинается комментарий к внутреннему коду, то они не сливаются.

3.В конце документирующего комментария следует оставлять один пустой комментарий - строку кода только со знаком "%".

*Пример:*

```matlab
function exampleFunc()
% exampleFunc - следующая строка в этом примере пустая.
%

    ...
end
```
